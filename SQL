-- Criação das Tabelas de Cadastro
CREATE TABLE Categoria (
    id_categoria INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(50)
);

CREATE TABLE Produto (
    sku VARCHAR(20) PRIMARY KEY,
    nome VARCHAR(100),
    descricao TEXT,
    id_categoria INT,
    FOREIGN KEY (id_categoria) REFERENCES Categoria(id_categoria)
);

CREATE TABLE Armazem (
    id_armazem INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100),
    cidade VARCHAR(50),
    estado CHAR(2),
    capacidade INT
);

CREATE TABLE Motorista (
    cnh VARCHAR(20) PRIMARY KEY,
    nome VARCHAR(100)
);

CREATE TABLE Veiculo (
    placa VARCHAR(10) PRIMARY KEY,
    modelo VARCHAR(50),
    capacidade_carga INT
);

-- Tabela de Movimentação com as Chaves que você adicionou no editor
CREATE TABLE Viagem (
    id_viagem INT PRIMARY KEY AUTO_INCREMENT,
    data_saida DATE,
    previsao_chegada DATE,
    status VARCHAR(20),
    fk_Veiculo_Placa VARCHAR(10),
    fk_Motorista_CNH VARCHAR(20),
    fk_Armazem_Origem INT,
    fk_Armazem_Destino INT,
    FOREIGN KEY (fk_Veiculo_Placa) REFERENCES Veiculo(placa),
    FOREIGN KEY (fk_Motorista_CNH) REFERENCES Motorista(cnh),
    FOREIGN KEY (fk_Armazem_Origem) REFERENCES Armazem(id_armazem),
    FOREIGN KEY (fk_Armazem_Destino) REFERENCES Armazem(id_armazem)
);

-- Tabelas Associativas (N:N)
CREATE TABLE Estoque (
    id_armazem INT,
    sku_produto VARCHAR(20),
    quantidade INT,
    PRIMARY KEY (id_armazem, sku_produto),
    FOREIGN KEY (id_armazem) REFERENCES Armazem(id_armazem),
    FOREIGN KEY (sku_produto) REFERENCES Produto(sku)
);

CREATE TABLE Carga (
    id_viagem INT,
    sku_produto VARCHAR(20),
    quantidade INT,
    PRIMARY KEY (id_viagem, sku_produto),
    FOREIGN KEY (id_viagem) REFERENCES Viagem(id_viagem),
    FOREIGN KEY (sku_produto) REFERENCES Produto(sku)
);
